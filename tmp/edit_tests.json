[
  {
    "old": "\t/**\n\t * Execute tous les tests.\n\t */\n\tstatic void runTests() {\n\t\tCalculsDouble calc = new CalculsDouble();\n\n\t\tSystem.out.println(\"=== Tests CalculsDouble ===\\n\");\n\n\t\t// Tests constructeur\n\t\tassertion(\"CalculsDouble positif\", new CalculsDouble(42).toDouble() == 42.0);\n\t\tassertion(\"CalculsDouble negatif\", new CalculsDouble(-42).toDouble() == -42.0);\n\t\tassertion(\"CalculsDouble decimal\", Math.abs(new CalculsDouble(3.14).toDouble() - 3.14) < 0.001);\n\t\tassertion(\"CalculsDouble zero\", new CalculsDouble(0).toDouble() == 0.0);\n\n\t\t// Tests addition\n\t\tassertion(\"Addition simples\",\n\t\t\tcalc.additionneNombres(new CalculsDouble(5), new CalculsDouble(3)).toDouble() == 8.0);\n\t\tassertion(\"Addition negatifs\",\n\t\t\tcalc.additionneNombres(new CalculsDouble(-5), new CalculsDouble(-3)).toDouble() == -8.0);\n\t\tassertion(\"Addition mixte\",\n\t\t\tcalc.additionneNombres(new CalculsDouble(5), new CalculsDouble(-3)).toDouble() == 2.0);\n\n\t\t// Tests soustraction\n\t\tassertion(\"Soustraction simple\",\n\t\t\tcalc.soustraitNombres(new CalculsDouble(10), new CalculsDouble(3)).toDouble() == 7.0);\n\t\tassertion(\"Soustraction resultat negatif\",\n\t\t\tcalc.soustraitNombres(new CalculsDouble(3), new CalculsDouble(10)).toDouble() == -7.0);\n\n\t\t// Tests multiplication\n\t\tassertion(\"Multiplication simple\",\n\t\t\tcalc.mult(new CalculsDouble(6), new CalculsDouble(7)).toDouble() == 42.0);\n\t\tassertion(\"Multiplication par zero\",\n\t\t\tcalc.mult(new CalculsDouble(100), new CalculsDouble(0)).toDouble() == 0.0);\n\t\tassertion(\"Multiplication negatifs\",\n\t\t\tcalc.mult(new CalculsDouble(-3), new CalculsDouble(-4)).toDouble() == 12.0);\n\n\t\t// Tests division (bug preexistant: off-by-one, retourne 5.1 au lieu de 5.0)\n\t\tassertion(\"Division simple\",\n\t\t\tcalc.division_boucle(new CalculsDouble(20), new CalculsDouble(4))[0].toDouble() == 5.0);\n\t\tassertion(\"Division decimale\",\n\t\t\tMath.abs(calc.division_boucle(new CalculsDouble(10), new CalculsDouble(4))[0].toDouble() - 2.5) < 0.001);\n\n\t\t// Tests valeur absolue\n\t\tassertion(\"Valeur absolue positif\",\n\t\t\tcalc.abs(new CalculsDouble(5)).toDouble() == 5.0);\n\t\tassertion(\"Valeur absolue negatif\",\n\t\t\tcalc.abs(new CalculsDouble(-5)).toDouble() == 5.0);\n\n\t\t// Test division par zero - retourne null (pas d'exception)\n\t\tCalculsDouble[] resultatDivZero = calc.division_boucle(new CalculsDouble(10), new CalculsDouble(0));\n\t\tassertion(\"Division par zero retourne null\", resultatDivZero == null);\n\n\t\t// ==============================================================================\n\t\t// Edge Cases (Bugs connus)\n\t\t// ==============================================================================\n\n\t\tSystem.out.println(\"\\n=== Edge Cases (Bugs a corriger) ===\\n\");\n\n\t\t// Bug 1 : Addition decimal + entier perd la decimale\n\t\tassertion(\"Bug1: Addition decimal + entier (12.5 + 3 = 15.5)\",\n\t\t\tMath.abs(calc.additionneNombres(new CalculsDouble(12.5), new CalculsDouble(3)).toDouble() - 15.5) < 0.001);\n\t\tassertion(\"Bug1: Addition entier + decimal (3 + 12.5 = 15.5)\",\n\t\t\tMath.abs(calc.additionneNombres(new CalculsDouble(3), new CalculsDouble(12.5)).toDouble() - 15.5) < 0.001);\n\t\tassertion(\"Bug1: Addition decimal + entier negatif (12.5 + (-3) = 9.5)\",\n\t\t\tMath.abs(calc.additionneNombres(new CalculsDouble(12.5), new CalculsDouble(-3)).toDouble() - 9.5) < 0.001);\n\n\t\t// Bug 3 : Grands nombres (> 10 chiffres) - Integer.parseInt plante\n\t\t// Ces tests vont echouer tant que le bug n'est pas corrige\n\t\tboolean grandNombreOk = false;\n\t\ttry {\n\t\t\tCalculsDouble grand = new CalculsDouble(12345678901.0);\n\t\t\tgrandNombreOk = grand.partieEntiere.equals(\"12345678901\");\n\t\t} catch (Exception exception) {\n\t\t\tgrandNombreOk = false;\n\t\t}\n\t\tassertion(\"Bug3: Grand nombre entier (12345678901)\", grandNombreOk);\n\n\t\tboolean additionGrandsNombresOk = false;\n\t\ttry {\n\t\t\tCalculsDouble resultatAdd = calc.additionneNombres(new CalculsDouble(9999999999.0), new CalculsDouble(1));\n\t\t\tadditionGrandsNombresOk = resultatAdd.partieEntiere.equals(\"10000000000\");\n\t\t} catch (Exception exception) {\n\t\t\tadditionGrandsNombresOk = false;\n\t\t}\n\t\tassertion(\"Bug3: Addition grands nombres\", additionGrandsNombresOk);\n\n\t\tboolean multiplicationGrandsNombresOk = false;\n\t\ttry {\n\t\t\tdouble resultat = calc.mult(new CalculsDouble(1000000), new CalculsDouble(1000000)).toDouble();\n\t\t\tmultiplicationGrandsNombresOk = (resultat == 1000000000000.0);\n\t\t} catch (Exception exception) {\n\t\t\tmultiplicationGrandsNombresOk = false;\n\t\t}\n\t\tassertion(\"Bug3: Multiplication grands nombres\", multiplicationGrandsNombresOk);\n\n\t\t// ==============================================================================\n\t\t// Resume\n\t\t// ==============================================================================\n\n\t\tSystem.out.println(\"\\n=== Resume ===\");\n\t\tSystem.out.println(\"Tests passes: \" + testsPassed);\n\t\tSystem.out.println(\"Tests echoues: \" + testsFailed);\n\t\tSystem.out.println(\"Total: \" + (testsPassed + testsFailed));\n\t}",
    "new": "\t/**\n\t * Execute tous les tests.\n\t */\n\tstatic void runTests() {\n\t\tCalculsDouble calc = new CalculsDouble();\n\t\tSystem.out.println(\"=== Tests CalculsDouble ===\\n\");\n\t\ttestsConstructeur();\n\t\ttestsAddition(calc);\n\t\ttestsSoustraction(calc);\n\t\ttestsMultiplication(calc);\n\t\ttestsDivision(calc);\n\t\ttestsValeurAbsolue(calc);\n\t\ttestsEdgeCases(calc);\n\t\tafficherResume();\n\t}\n\n// ------------------------------------------------------------------------------\n// Tests unitaires par categorie\n// ------------------------------------------------------------------------------\n\n\t/**\n\t * Tests du constructeur CalculsDouble.\n\t */\n\tstatic void testsConstructeur() {\n\t\tassertion(\"CalculsDouble positif\", new CalculsDouble(42).toDouble() == 42.0);\n\t\tassertion(\"CalculsDouble negatif\", new CalculsDouble(-42).toDouble() == -42.0);\n\t\tassertion(\"CalculsDouble decimal\", Math.abs(new CalculsDouble(3.14).toDouble() - 3.14) < 0.001);\n\t\tassertion(\"CalculsDouble zero\", new CalculsDouble(0).toDouble() == 0.0);\n\t}\n\n\t/**\n\t * Tests de l'addition.\n\t * @param calc Instance de CalculsDouble.\n\t */\n\tstatic void testsAddition(CalculsDouble calc) {\n\t\tassertion(\"Addition simples\",\n\t\t\tcalc.additionneNombres(new CalculsDouble(5), new CalculsDouble(3)).toDouble() == 8.0);\n\t\tassertion(\"Addition negatifs\",\n\t\t\tcalc.additionneNombres(new CalculsDouble(-5), new CalculsDouble(-3)).toDouble() == -8.0);\n\t\tassertion(\"Addition mixte\",\n\t\t\tcalc.additionneNombres(new CalculsDouble(5), new CalculsDouble(-3)).toDouble() == 2.0);\n\t}\n\n\t/**\n\t * Tests de la soustraction.\n\t * @param calc Instance de CalculsDouble.\n\t */\n\tstatic void testsSoustraction(CalculsDouble calc) {\n\t\tassertion(\"Soustraction simple\",\n\t\t\tcalc.soustraitNombres(new CalculsDouble(10), new CalculsDouble(3)).toDouble() == 7.0);\n\t\tassertion(\"Soustraction resultat negatif\",\n\t\t\tcalc.soustraitNombres(new CalculsDouble(3), new CalculsDouble(10)).toDouble() == -7.0);\n\t}\n\n\t/**\n\t * Tests de la multiplication.\n\t * @param calc Instance de CalculsDouble.\n\t */\n\tstatic void testsMultiplication(CalculsDouble calc) {\n\t\tassertion(\"Multiplication simple\",\n\t\t\tcalc.mult(new CalculsDouble(6), new CalculsDouble(7)).toDouble() == 42.0);\n\t\tassertion(\"Multiplication par zero\",\n\t\t\tcalc.mult(new CalculsDouble(100), new CalculsDouble(0)).toDouble() == 0.0);\n\t\tassertion(\"Multiplication negatifs\",\n\t\t\tcalc.mult(new CalculsDouble(-3), new CalculsDouble(-4)).toDouble() == 12.0);\n\t}\n\n\t/**\n\t * Tests de la division.\n\t * @param calc Instance de CalculsDouble.\n\t */\n\tstatic void testsDivision(CalculsDouble calc) {\n\t\tassertion(\"Division simple\",\n\t\t\tcalc.division_boucle(new CalculsDouble(20), new CalculsDouble(4))[0].toDouble() == 5.0);\n\t\tassertion(\"Division decimale\",\n\t\t\tMath.abs(calc.division_boucle(new CalculsDouble(10), new CalculsDouble(4))[0].toDouble() - 2.5) < 0.001);\n\t\tCalculsDouble[] resultatDivZero = calc.division_boucle(new CalculsDouble(10), new CalculsDouble(0));\n\t\tassertion(\"Division par zero retourne null\", resultatDivZero == null);\n\t}\n\n\t/**\n\t * Tests de la valeur absolue.\n\t * @param calc Instance de CalculsDouble.\n\t */\n\tstatic void testsValeurAbsolue(CalculsDouble calc) {\n\t\tassertion(\"Valeur absolue positif\",\n\t\t\tcalc.abs(new CalculsDouble(5)).toDouble() == 5.0);\n\t\tassertion(\"Valeur absolue negatif\",\n\t\t\tcalc.abs(new CalculsDouble(-5)).toDouble() == 5.0);\n\t}\n\n// ------------------------------------------------------------------------------\n// Tests Edge Cases (bugs connus)\n// ------------------------------------------------------------------------------\n\n\t/**\n\t * Tests des cas limites (bugs connus).\n\t * @param calc Instance de CalculsDouble.\n\t */\n\tstatic void testsEdgeCases(CalculsDouble calc) {\n\t\tSystem.out.println(\"\\n=== Edge Cases (Bugs a corriger) ===\\n\");\n\t\ttestsBug1Addition(calc);\n\t\ttestsBug3GrandsNombres(calc);\n\t}\n\n\t/**\n\t * Tests Bug1 : Addition decimal + entier.\n\t * @param calc Instance de CalculsDouble.\n\t */\n\tstatic void testsBug1Addition(CalculsDouble calc) {\n\t\tassertion(\"Bug1: Addition decimal + entier (12.5 + 3 = 15.5)\",\n\t\t\tMath.abs(calc.additionneNombres(new CalculsDouble(12.5), new CalculsDouble(3)).toDouble() - 15.5) < 0.001);\n\t\tassertion(\"Bug1: Addition entier + decimal (3 + 12.5 = 15.5)\",\n\t\t\tMath.abs(calc.additionneNombres(new CalculsDouble(3), new CalculsDouble(12.5)).toDouble() - 15.5) < 0.001);\n\t\tassertion(\"Bug1: Addition decimal + entier negatif (12.5 + (-3) = 9.5)\",\n\t\t\tMath.abs(calc.additionneNombres(new CalculsDouble(12.5), new CalculsDouble(-3)).toDouble() - 9.5) < 0.001);\n\t}\n\n\t/**\n\t * Tests Bug3 : Grands nombres (> 10 chiffres).\n\t * @param calc Instance de CalculsDouble.\n\t */\n\tstatic void testsBug3GrandsNombres(CalculsDouble calc) {\n\t\tassertion(\"Bug3: Grand nombre entier (12345678901)\", testerGrandNombre());\n\t\tassertion(\"Bug3: Addition grands nombres\", testerAdditionGrandsNombres(calc));\n\t\tassertion(\"Bug3: Multiplication grands nombres\", testerMultiplicationGrandsNombres(calc));\n\t}\n\n// ------------------------------------------------------------------------------\n// Fonctions auxiliaires pour tests Bug3\n// ------------------------------------------------------------------------------\n\n\t/**\n\t * Teste la creation d'un grand nombre.\n\t * @return True si le test passe.\n\t */\n\tstatic boolean testerGrandNombre() {\n\t\ttry {\n\t\t\tCalculsDouble grand = new CalculsDouble(12345678901.0);\n\t\t\treturn grand.partieEntiere.equals(\"12345678901\");\n\t\t} catch (Exception exception) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Teste l'addition de grands nombres.\n\t * @param calc Instance de CalculsDouble.\n\t * @return True si le test passe.\n\t */\n\tstatic boolean testerAdditionGrandsNombres(CalculsDouble calc) {\n\t\ttry {\n\t\t\tCalculsDouble resultatAdd = calc.additionneNombres(new CalculsDouble(9999999999.0), new CalculsDouble(1));\n\t\t\treturn resultatAdd.partieEntiere.equals(\"10000000000\");\n\t\t} catch (Exception exception) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Teste la multiplication de grands nombres.\n\t * @param calc Instance de CalculsDouble.\n\t * @return True si le test passe.\n\t */\n\tstatic boolean testerMultiplicationGrandsNombres(CalculsDouble calc) {\n\t\ttry {\n\t\t\tdouble resultat = calc.mult(new CalculsDouble(1000000), new CalculsDouble(1000000)).toDouble();\n\t\t\treturn (resultat == 1000000000000.0);\n\t\t} catch (Exception exception) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n// ------------------------------------------------------------------------------\n// Resume\n// ------------------------------------------------------------------------------\n\n\t/**\n\t * Affiche le resume des tests.\n\t */\n\tstatic void afficherResume() {\n\t\tSystem.out.println(\"\\n=== Resume ===\");\n\t\tSystem.out.println(\"Tests passes: \" + testsPassed);\n\t\tSystem.out.println(\"Tests echoues: \" + testsFailed);\n\t\tSystem.out.println(\"Total: \" + (testsPassed + testsFailed));\n\t}"
  }
]
